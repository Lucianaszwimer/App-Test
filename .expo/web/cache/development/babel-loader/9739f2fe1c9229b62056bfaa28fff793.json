{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport { HybridContext } from \"./../hybrid-overlay/Context\";\nimport Appearance from \"react-native-web/dist/exports/Appearance\";\nexport var useColorMode = function useColorMode() {\n  var _React$useContext = React.useContext(HybridContext),\n      colorModeContext = _React$useContext.colorMode;\n\n  if (colorModeContext === undefined) {\n    throw new Error('useColorMode must be used within a NativeBaseProvider');\n  }\n\n  return colorModeContext;\n};\nexport function useColorModeValue(light, dark) {\n  var _useColorMode = useColorMode(),\n      colorMode = _useColorMode.colorMode;\n\n  return colorMode === 'dark' ? dark : light;\n}\nexport function useModeManager(initialColorMode, useSystemColorMode, colorModeManager) {\n  var systemColorMode = Appearance.getColorScheme();\n\n  if (useSystemColorMode) {\n    initialColorMode = systemColorMode;\n  }\n\n  var _useState = useState(initialColorMode),\n      _useState2 = _slicedToArray(_useState, 2),\n      colorMode = _useState2[0],\n      setRawMode = _useState2[1];\n\n  var setColorMode = React.useCallback(function _callee(val) {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!colorModeManager) {\n              _context.next = 3;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(colorModeManager.set(val));\n\n          case 3:\n            setRawMode(val);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [colorModeManager]);\n  useEffect(function () {\n    if (colorModeManager) {\n      (function getMode() {\n        var value;\n        return _regeneratorRuntime.async(function getMode$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(colorModeManager.get(initialColorMode));\n\n              case 2:\n                value = _context2.sent;\n\n                if (value && value !== colorMode) {\n                  setRawMode(value);\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }\n  }, [colorMode, initialColorMode, colorModeManager]);\n  useEffect(function () {\n    if (!colorModeManager && useSystemColorMode) {\n      setRawMode(systemColorMode);\n    }\n  }, [systemColorMode, colorModeManager, useSystemColorMode, setRawMode]);\n  return {\n    colorMode: colorMode,\n    setColorMode: setColorMode\n  };\n}\nexport function useAccessibleColors() {\n  var _React$useContext2 = React.useContext(HybridContext),\n      colorModeContext = _React$useContext2.colorMode;\n\n  var toggleAccessibleColors = function toggleAccessibleColors() {\n    return colorModeContext.setAccessibleColors(!colorModeContext.accessibleColors);\n  };\n\n  return [colorModeContext.accessibleColors, colorModeContext.setAccessibleColors, toggleAccessibleColors];\n}","map":{"version":3,"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAMA,SAASC,aAAT;;AAIA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAA8B;EACxD,wBAIIJ,KAAK,CAACK,UAANL,CAAsCG,aAAtCH,CAJJ;EAAA,IACaM,gBADb,qBACEC,SADF;;EAKA,IAAID,gBAAgB,KAAKE,SAAzB,EAAoC;IAClC,MAAM,IAAIC,KAAJ,CAAU,uDAAV,CAAN;EACD;;EACD,OAAOH,gBAAP;AATK;AAYP,OAAO,SAASI,iBAAT,CAA2BC,KAA3B,EAAuCC,IAAvC,EAAkD;EACvD,oBAAsBR,YAAY,EAAlC;EAAA,IAAQG,SAAR,iBAAQA,SAAR;;EACA,OAAOA,SAAS,KAAK,MAAdA,GAAuBK,IAAvBL,GAA8BI,KAArC;AACD;AAED,OAAO,SAASE,cAAT,CACLC,gBADK,EAELC,kBAFK,EAGLC,gBAHK,EAIL;EACA,IAAMC,eAAe,GAAGC,UAAU,CAACC,cAAXD,EAAxB;;EAEA,IAAIH,kBAAJ,EAAwB;IACtBD,gBAAgB,GAAGG,eAAnBH;EACD;;EAED,gBAAgCb,QAAQ,CAAYa,gBAAZ,CAAxC;EAAA;EAAA,IAAOP,SAAP;EAAA,IAAkBa,UAAlB;;EACA,IAAMC,YAAY,GAAGrB,KAAK,CAACsB,WAANtB,CACnB,iBAAOuB,GAAP;IAAA;MAAA;QAAA;UAAA;YAAA,KACMP,gBADN;cAAA;cAAA;YAAA;;YAAA;YAAA,iCAEUA,gBAAgB,CAACQ,GAAjBR,CAAqBO,GAArBP,CAFV;;UAAA;YAIEI,UAAU,CAACG,GAAD,CAAVH;;UAJF;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CADmBpB,EAOnB,CAACgB,gBAAD,CAPmBhB,CAArB;EAWAE,SAAS,CAAC,YAAM;IACd,IAAIc,gBAAJ,EAAsB;MACpB,CAAC,SAAeS,OAAf;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,iCACmBT,gBAAgB,CAACU,GAAjBV,CAAqBF,gBAArBE,CADnB;;cAAA;gBACKW,KADL;;gBAEC,IAAIA,KAAK,IAAIA,KAAK,KAAKpB,SAAvB,EAAkC;kBAChCa,UAAU,CAACO,KAAD,CAAVP;gBACD;;cAJF;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAAD;IAMD;EARM,GASN,CAACb,SAAD,EAAYO,gBAAZ,EAA8BE,gBAA9B,CATM,CAATd;EAYAA,SAAS,CAAC,YAAM;IACd,IAAI,CAACc,gBAAD,IAAqBD,kBAAzB,EAA6C;MAC3CK,UAAU,CAACH,eAAD,CAAVG;IACD;EAHM,GAIN,CAACH,eAAD,EAAkBD,gBAAlB,EAAoCD,kBAApC,EAAwDK,UAAxD,CAJM,CAATlB;EAMA,OAAO;IAAEK,SAAF,EAAEA,SAAF;IAAac;EAAb,CAAP;AACD;AAED,OAAO,SAASO,mBAAT,GAIL;EACA,yBAII5B,KAAK,CAACK,UAANL,CAAsCG,aAAtCH,CAJJ;EAAA,IACaM,gBADb,sBACEC,SADF;;EAKA,IAAMsB,sBAAsB,GAAG,SAAzBA,sBAAyB;IAAA,OAC7BvB,gBAAgB,CAACwB,mBAAjBxB,CAAqC,CAACA,gBAAgB,CAACyB,gBAAvDzB,CAD6B;EAAA,CAA/B;;EAEA,OAAO,CACLA,gBAAgB,CAACyB,gBADZ,EAELzB,gBAAgB,CAACwB,mBAFZ,EAGLD,sBAHK,CAAP;AAKD","names":["React","useState","useEffect","HybridContext","useColorMode","useContext","colorModeContext","colorMode","undefined","Error","useColorModeValue","light","dark","useModeManager","initialColorMode","useSystemColorMode","colorModeManager","systemColorMode","Appearance","getColorScheme","setRawMode","setColorMode","useCallback","val","set","getMode","get","value","useAccessibleColors","toggleAccessibleColors","setAccessibleColors","accessibleColors"],"sources":["hooks.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport type {\n  ColorMode,\n  StorageManager,\n  IColorModeContextProps,\n} from './types';\nimport { HybridContext } from './../hybrid-overlay/Context';\nimport type { IHybridContextProps } from './../hybrid-overlay/types';\nimport { Appearance } from 'react-native';\n\nexport const useColorMode = (): IColorModeContextProps => {\n  const {\n    colorMode: colorModeContext,\n  }: {\n    colorMode: IColorModeContextProps;\n  } = React.useContext<IHybridContextProps>(HybridContext);\n  if (colorModeContext === undefined) {\n    throw new Error('useColorMode must be used within a NativeBaseProvider');\n  }\n  return colorModeContext;\n};\n\nexport function useColorModeValue(light: any, dark: any) {\n  const { colorMode } = useColorMode();\n  return colorMode === 'dark' ? dark : light;\n}\n\nexport function useModeManager(\n  initialColorMode: ColorMode,\n  useSystemColorMode: boolean | undefined,\n  colorModeManager?: StorageManager\n) {\n  const systemColorMode = Appearance.getColorScheme();\n\n  if (useSystemColorMode) {\n    initialColorMode = systemColorMode;\n  }\n\n  const [colorMode, setRawMode] = useState<ColorMode>(initialColorMode);\n  const setColorMode = React.useCallback(\n    async (val: ColorMode) => {\n      if (colorModeManager) {\n        await colorModeManager.set(val);\n      }\n      setRawMode(val);\n    },\n    [colorModeManager]\n  );\n\n  // For initial setting initial color mode from storage\n  useEffect(() => {\n    if (colorModeManager) {\n      (async function getMode() {\n        let value = await colorModeManager.get(initialColorMode);\n        if (value && value !== colorMode) {\n          setRawMode(value);\n        }\n      })();\n    }\n  }, [colorMode, initialColorMode, colorModeManager]);\n\n  // Set system color mode only when user has not passed a colorModeManager\n  useEffect(() => {\n    if (!colorModeManager && useSystemColorMode) {\n      setRawMode(systemColorMode);\n    }\n  }, [systemColorMode, colorModeManager, useSystemColorMode, setRawMode]);\n\n  return { colorMode, setColorMode };\n}\n\nexport function useAccessibleColors(): [\n  boolean,\n  (val: boolean) => void,\n  () => void\n] {\n  const {\n    colorMode: colorModeContext,\n  }: {\n    colorMode: IColorModeContextProps;\n  } = React.useContext<IHybridContextProps>(HybridContext);\n  const toggleAccessibleColors = () =>\n    colorModeContext.setAccessibleColors(!colorModeContext.accessibleColors);\n  return [\n    colorModeContext.accessibleColors,\n    colorModeContext.setAccessibleColors,\n    toggleAccessibleColors,\n  ];\n}\n"]},"metadata":{},"sourceType":"module"}